# 自我介绍

面试官您好,我来自广东技术师范大学
# 实习经历介绍

负责qms质量管理系统的开发与维护,并拉通上下游系统.在职期间重要工作成果如下:
## 慢查询

根据场景对超过5s的语句进行排查

1. 索引设计

查询频繁的字段加上索引

2. SQL语句优化
    1. 如分类编码,用户习惯从大分类开始输入,于是模糊查询时替换掉左边的'%'
    2. 根据时间范围定位数据,因为使用month函数导致的隐式转换.
    3. 取消null值判断,改用默认值判断


## 来料检验

### 背景

针对上游系统推送过来的待检物料信息,由于生成检验单等操作链路较长,且推送的来料存在高峰期.

### 解决思路

为防止大量来料送检引起上游忙等的情况,通过引入消息队列`rabbitmq`的机制进行削峰.

### 具体方案

#### 1. 生产者机制 


生产者消息入库后推送

**qms事件队列**

| 消息key | 事件消息 | 首次发送时间  | 最后发送时间 | 发送次数  | 首次接受时间     | 最后接收时间 |
| ------- | -------- | ------------- | ------------ | --------- | ---------------- | ------------ |
| mqkey   | eventmsg | firstSendTime | lastSendTime | sendtimes | firstRecieveTime | lasttime     |


**qms事件交互日志**

| 事件id (对应队列id) | 消息key | 事件消息 | 处理结果 | 错误消息 | 是否结束 | 实例id     |
| ------- | ------- | -------- | -------- | -------- | -------- | ---------- |
| eventId | mqkey   | eventmsg | mqResult | errmsg   | isfinish | instanceId |


#### 2. 消费者机制


消费者根据消费信息查库,进行下一步逻辑判断.采取手动ack回应,对于消费失败的数据不再重入队列,登记失败后更新库.

#### 3.补偿机制

通过xxljob定时任务,查询数据库中    进行再推送

#### 4.rabbitmq配置

1. 生产者开启confirm模式
2. 多消费者模式
3. 消费者手动ack模式


## 代码重构

### 背景

前开发人员留下的代码凌乱,复用性和扩展性不高,进行重构.

### 解决过程

#### 1. 策略模式

**针对场景:**  以抽样方案为例,一个物料有五种抽样方案(目前),后续可能还有其它的方案.原代码通过大量的if-else判断,不美观且复用性差.

**成果:** 构建策略抽象类,定义抽象方法,每种抽样方案继承该方法单独实现.通过`spring的bean机制` 注册到上下文中,在枚举类中定义抽样类型与其对应的策略类名称,以此获取对应策略类进行计算,后期维护只需继承抽象类增加自定义实现,在枚举类中引入即可.

#### 2. 属性比较

**针对场景:** 针对属性没有修改需要弹出提示,前端实现难度较大,后端不同业务代码重复实现,造成代码冗余.

**成果:** 抽取公共逻辑,主要运用反射的机制,传入所要比较对象的类型和dto类型进行转换,并反射获取字段值. 针对某些只比较特定几个字段的情况,加入忽略词,对比时跳过即可.

#### 3. 
